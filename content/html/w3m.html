<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Unixfandom</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
  </style>
  <link rel="stylesheet" href="../stylesheet/style.css" />
</head>
<body>
<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="UTF-8">
        <link rel="stylesheet" href="/content/stylesheet/style.css">
</head>
<body>
<header id="title-block-header">
<h1 class="title"><a class="title" href=/index.html>Unixfandom</h1>
</header>
<nav id="TOC" role="doc-toc">
<ul>
<li><a href="#awesomeness-with-w3m">Awesomeness with W3M</a>
<ul>
<li><a href="#preface">Preface</a></li>
<li><a href="#features">Features</a>
<ul>
<li><a href="#here-are-some-notable-features-of-w3m">Here are some notable features of w3m:</a></li>
</ul></li>
</ul></li>
<li><a href="#basic-configuration">Basic configuration</a>
<ul>
<li><a href="#cool-scripts">Cool scripts</a></li>
<li><a href="#tab-operations">Tab operations</a></li>
</ul></li>
</ul>
</nav>
<h1 id="awesomeness-with-w3m">Awesomeness with W3M</h1>
<h2 id="preface">Preface</h2>
<p>Terminal web browsers are a joke, no doubt about it, but W3M is something extraâ€¦ You should watch Gotbletu's youtube videos on W3M. He's done some cool things with it. w3m.png</p>
<h2 id="features">Features</h2>
<p>W3M can execute [1]CGI scripts and display the output of the script to the screen. The only reference to using cgi scripts was on [2]this w3m manual page. I don't entirley understand how it works, but I guess printing out http header information to the screen can be used to control w3m. I'll show you some cool scripts you could use later in this page.</p>
<h3 id="here-are-some-notable-features-of-w3m">Here are some notable features of w3m:</h3>
<ol>
<li>Fully customizable keybindings</li>
<li>User scripts (diy addons)</li>
<li>Images (install w3m-img)</li>
<li>Tabbing</li>
<li>Cookie management, history, useragent, autofill, etc.</li>
</ol>
<p>Image previews only work well on a select number of terminals. Xterm and Urxvt work well. Other terminals may either not display them at all or have a lot of flickering.</p>
<h1 id="basic-configuration">Basic configuration</h1>
<p>Here's a list of important files:</p>
<ol>
<li>~/.w3m/config - Contains browser config options</li>
<li>~/.w3m/config/keymap - Keybindings. "keymap KEY NULL" clears the keys original mapping.</li>
<li>~/.w3m/mailcap - Dictates which programs open which filetypes</li>
</ol>
<p>The config file is generated by w3m automatically. You can either edit this config directly or inside w3m itself. One interesting variable is "extbrowser". You can specify an external command to run on a webpage url. The external browser can be invoked using: &lt;NUM&gt;M</p>
<pre class="shell"><code># Example options (~/.w3m/config)
extbrowser sh -c &#39;printf %s &quot;$0&quot; | xsel -b &amp;&amp; notify-send &quot;W3M&quot; &quot;URL COPIED&quot;&#39;
extbrowser2 mpv  %s
extbrowser3 youtube-dl -f &quot;bestvideo[ext=mp4]+bestaudio[ext=m4a]/mp4&quot; %s
extbrowser4 setsid xdg-open %s &amp;
</code></pre>
<p>The keymap file is created manually. I won't go too much into detail. Here's an overly populated example config. [2] Besides basic w3m movement, you could also make cool keybindings like these:</p>
<pre class="shell"><code># Toggle images
keymap i COMMAND &quot;SET_OPTION display_image=toggle; RELOAD&quot;
# Toggle line number
keymap d COMMAND &quot;SET_OPTION show_lnum=toggle&quot;
# Yank current url
keymap yy       EXTERN     &quot;echo -n %s | xsel -b&quot;
# Yank url under cursor
keymap yf       EXTERN_LINK &#39;env printf %s &quot;$0&quot; | xsel -b&#39;
</code></pre>
<h2 id="cool-scripts">Cool scripts</h2>
<p>I use these scripts to make w3m usable</p>
<ol>
<li>FZF web search [4](example gif)</li>
<li>FZF bookmark search [5](example gif)</li>
<li>Torrent downloader [6](example gif)</li>
<li>Undo close tab [7](example gif)</li>
</ol>
<p>You can grab all of these scripts [8]from my website. You must place the scripts in cgi-bin-root in <em>usr/lib/w3m/cgi-bin</em> and MUST have 755 permissions. The scripts in the cgi-bin directory can be placed in ~/.w3m/cgi-bin/. I'm pretty sure the reason for placing certain scripts in /usr/lib/w3m/cgi-bin has to do with those scripts sending http header information to W3M</p>
<p>You can setup keymaps to execute these scripts like this:</p>
<pre class="shell"><code># Fuzzy search search engines. Capital=New tab
keymap  ss      COMMAND       &quot;SHELL ~/.w3m/cgi-bin/fzf_search.cgi ; GOTO /usr/lib/w3m/cgi-bin/goto_clipboard.cgi&quot;
keymap  sS      COMMAND       &quot;SHELL ~/.w3m/cgi-bin/fzf_search.cgi ; TAB_GOTO /usr/lib/w3m/cgi-bin/goto_clipboard.cgi&quot;
# Fuzzy search bookmarks. Capital=New tab
keymap  sb      COMMAND       &quot;SHELL ~/.w3m/cgi-bin/fzf_bookmarks.cgi ; GOTO /usr/lib/w3m/cgi-bin/goto_clipboard.cgi&quot;
keymap  sB      COMMAND       &quot;SHELL ~/.w3m/cgi-bin/fzf_bookmarks.cgi ; TAB_GOTO/usr/lib/w3m/cgi-bin/goto_clipboard.cgi&quot;
# Close tab on ctrl-x and undo tab on ctrl-u
keymap  C-x      COMMAND     &quot;EXTERN &#39;echo %s &gt;&gt; ~/.w3m/RestoreTab.txt&#39; ; CLOSE_TAB&quot;
keymap  C-u      TAB_GOTO    /usr/lib/w3m/cgi-bin/restore_tab.cgi
</code></pre>
<p>To get the magnet.py script to work, you need to create the file ~/.w3m/urimethodmap with this line added:</p>
<pre class="shell"><code>magnet: file:/cgi-bin/magnet.py?%s
</code></pre>
<p>Opening a magnet link should now automatically send it to w3m.</p>
<h2 id="tab-operations">Tab operations</h2>
<p>Here are my keybindings for tabbing.</p>
<pre class="shell"><code>~/.w3m/keymap
keymap TAB NEXT_TAB
keymap M-TAB PREV_TAB
keymap C-t NEW_TAB
keymap T TAB_MENU
</code></pre>
<p>References</p>
<ol>
<li><a href="https://en.wikipedia.org/wiki/Common_Gateway_Interface">https://en.wikipedia.org/wiki/Common_Gateway_Interface</a></li>
<li><a href="http://w3m.sourceforge.net/MANUAL#LocalCGI">http://w3m.sourceforge.net/MANUAL#LocalCGI</a></li>
<li><a href="https://github.com/felipesaa/A-vim-like-firefox-like-configuration-for-w3m/blob/master/keymap">https://github.com/felipesaa/A-vim-like-firefox-like-configuration-for-w3m/blob/master/keymap</a></li>
<li><a href="file:///opt/webNew/content/pix/w3m-fzfsearch.gif">file:///opt/webNew/content/pix/w3m-fzfsearch.gif</a></li>
<li><a href="file:///opt/webNew/content/pix/w3m-fzfbookmark.gif">file:///opt/webNew/content/pix/w3m-fzfbookmark.gif</a></li>
<li><a href="file:///opt/webNew/content/pix/w3m-magnet.gif">file:///opt/webNew/content/pix/w3m-magnet.gif</a></li>
<li><a href="file:///opt/webNew/content/pix/w3m-undotab.gif">file:///opt/webNew/content/pix/w3m-undotab.gif</a></li>
<li><a href="file:///opt/website/files/config/w3m/">file:///opt/website/files/config/w3m/</a></li>
</ol>
<small><a href="/">Back to index</a><small>
</body>
</html>
